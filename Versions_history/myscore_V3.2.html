<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyScore V3.2 - æˆ‘çš„æˆç»©å•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* æ˜äº®ä¸»é¢˜é…è‰² */
        :root {
            --bg-main: #faf8f5;
            --bg-card: #ffffff;
            --primary: #10b981;
            --primary-dark: #059669;
            --text-main: #1f2937;
            --text-secondary: #6b7280;
            --listening: #3b82f6;
            --reading: #10b981;
            --writing: #f59e0b;
            --speaking: #8b5cf6;
            --translation: #ef4444;
        }

        body {
            background: linear-gradient(135deg, #faf8f5 0%, #f3f0eb 100%);
            min-height: 100vh;
        }

        .card-bright {
            background: var(--bg-card);
            border-radius: 1rem;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(16, 185, 129, 0.1);
        }

        .card-bright:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(16, 185, 129, 0.15);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .gradient-text-bright {
            background: linear-gradient(135deg, #10b981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subject-card-listening {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border: 2px solid #3b82f6;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.15);
        }

        .subject-card-reading {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 2px solid #10b981;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.15);
        }

        .subject-card-writing {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border: 2px solid #f59e0b;
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.15);
        }

        .subject-card-speaking {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #8b5cf6;
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.15);
        }

        .subject-card-translation {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 2px solid #ef4444;
            box-shadow: 0 4px 20px rgba(239, 68, 68, 0.15);
        }

        .subject-card {
            transition: all 0.3s ease;
            border-radius: 1rem;
        }

        .subject-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .input-bright {
            background: #ffffff;
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
        }

        .input-bright:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        .input-bright.input-error {
            border-color: #ef4444;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .input-warning {
            font-size: 0.75rem;
            color: #ef4444;
            margin-top: 0.25rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #10b981, #059669);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6366f1, #4f46e5);
            transition: all 0.3s ease;
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 70, 94, 0.3);
        }

        .btn-secondary:active {
            transform: translateY(0);
        }

        /* æ‰‹é£ç´æ ·å¼ */
        .accordion-item {
            transition: all 0.3s ease;
            border-radius: 1rem;
            margin-bottom: 1rem;
        }

        .accordion-item:last-child {
            margin-bottom: 0;
        }

        .accordion-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            transition: all 0.3s ease;
        }

        .accordion-header:hover {
            opacity: 0.9;
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .accordion-content.expanded {
            max-height: 800px;
        }

        .accordion-arrow {
            transition: transform 0.3s ease;
        }

        .accordion-arrow.expanded {
            transform: rotate(180deg);
        }

        /* Tabæ ·å¼ */
        .dashboard-tab {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }

        .dashboard-tab.active {
            border-bottom-color: #10b981;
            color: #10b981;
        }

        .dashboard-tab:not(.active):hover {
            color: #10b981;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stat-card {
            background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
            border: 2px solid #e5e7eb;
            border-radius: 1rem;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: #10b981;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.15);
        }

        .exam-type-btn {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .exam-type-btn.active {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border-color: #059669;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .exam-type-btn:not(.active):hover {
            border-color: #10b981;
            background-color: rgba(16, 185, 129, 0.1);
        }

        /* æ•°æ®ç®¡ç†åŒºåŸŸæ ·å¼ */
        .data-management-section {
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfeff 50%, #f0f9ff 100%);
            border-radius: 1.5rem;
            border: 2px solid #a7f3d0;
            padding: 2rem;
            margin-top: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(16, 185, 129, 0.1);
        }

        .data-management-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e5e7eb;
        }

        .data-management-title svg {
            width: 28px;
            height: 28px;
            color: #10b981;
        }

        .data-management-title h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
        }

        .data-card {
            background: #ffffff;
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .data-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .data-card-export {
            border: 2px solid #93c5fd;
        }

        .data-card-export:hover {
            border-color: #3b82f6;
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.15);
        }

        .data-card-import {
            border: 2px solid #a7f3d0;
        }

        .data-card-import:hover {
            border-color: #10b981;
            box-shadow: 0 20px 40px rgba(16, 185, 129, 0.15);
        }

        .data-card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .data-card-export .data-card-icon {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
        }

        .data-card-import .data-card-icon {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
        }

        .data-card-icon svg {
            width: 24px;
            height: 24px;
        }

        .data-card-export .data-card-icon svg {
            color: #3b82f6;
        }

        .data-card-import .data-card-icon svg {
            color: #10b981;
        }

        .data-card-title {
            font-size: 1.125rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .data-card-export .data-card-title {
            color: #1e40af;
        }

        .data-card-import .data-card-title {
            color: #065f46;
        }

        .data-card-description {
            color: #6b7280;
            font-size: 0.875rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            flex-grow: 1;
        }

        .data-card-btn {
            width: 100%;
            padding: 0.875rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.9375rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .data-card-btn svg {
            width: 20px;
            height: 20px;
        }

        .btn-export {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border: none;
        }

        .btn-export:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(37, 99, 235, 0.3);
        }

        .file-upload-area {
            position: relative;
            margin-top: auto;
        }

        .file-upload-btn {
            width: 100%;
            padding: 0.875rem 1.5rem;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.9375rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .file-upload-btn:hover {
            background: linear-gradient(135deg, #059669, #047857);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(5, 150, 105, 0.3);
        }

        .file-upload-btn svg {
            width: 20px;
            height: 20px;
        }

        .file-upload-input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .file-status {
            margin-top: 0.75rem;
            padding: 0.5rem 0.75rem;
            background: #f3f4f6;
            border-radius: 0.5rem;
            font-size: 0.8125rem;
            color: #6b7280;
            text-align: center;
        }

        .file-status.success {
            background: #d1fae5;
            color: #065f46;
        }

        .data-stats {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }

        .data-stat-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8125rem;
            color: #6b7280;
        }

        .data-stat-item svg {
            width: 16px;
            height: 16px;
            color: #9ca3af;
        }

        .data-stat-value {
            font-weight: 600;
            color: #374151;
        }

        /* å›¾è¡¨å®¹å™¨æ ·å¼ */
        .chart-container {
            background: #ffffff;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 2px solid #e5e7eb;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        .chart-title {
            font-size: 1rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .chart-wrapper {
            position: relative;
            height: 350px;
        }

        .no-data-message {
            text-align: center;
            padding: 2rem;
            color: #9ca3af;
        }

        .no-data-message svg {
            width: 48px;
            height: 48px;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
    </style>
</head>
<body class="text-gray-900">
    <div id="app" class="container mx-auto px-4 py-8 max-w-5xl">
        <header class="mb-8">
            <div class="card-bright p-6 flex flex-col sm:flex-row justify-between items-center gap-4">
                <div>
                    <h1 class="text-4xl font-bold gradient-text-bright">MyScore</h1>
                    <p class="text-gray-500 text-sm mt-1">æˆ‘çš„æˆç»©å• (V3.2 - æ•°æ®å¯è§†åŒ–å‡çº§)</p>
                </div>
                <nav class="flex gap-3">
                    <button onclick="showPage('dashboard')" id="nav-dashboard" class="px-5 py-2.5 rounded-lg bg-emerald-500 hover:bg-emerald-600 text-white transition-all font-medium shadow-md">ä»ªè¡¨ç›˜</button>
                    <button onclick="showPage('entry')" id="nav-entry" class="px-5 py-2.5 rounded-lg bg-gray-200 hover:bg-gray-300 text-gray-700 transition-all font-medium">å½•å…¥æˆç»©</button>
                </nav>
            </div>
        </header>

        <!-- ä»ªè¡¨ç›˜é¡µé¢ -->
        <div id="page-dashboard" class="page">
            <!-- Tab åˆ‡æ¢ -->
            <div class="card-bright p-4 mb-6">
                <div class="flex gap-6 border-b border-gray-200">
                    <button onclick="switchDashboardTab('overview')" id="tab-overview" class="dashboard-tab active px-4 py-2 text-gray-600 font-medium">æ¦‚è§ˆ</button>
                    <button onclick="switchDashboardTab('ielts')" id="tab-ielts" class="dashboard-tab px-4 py-2 text-gray-600 font-medium">é›…æ€ç»Ÿè®¡</button>
                    <button onclick="switchDashboardTab('cet')" id="tab-cet" class="dashboard-tab px-4 py-2 text-gray-600 font-medium">å››å…­çº§ç»Ÿè®¡</button>
                </div>
            </div>

            <!-- æ¦‚è§ˆ Tab -->
            <div id="tab-content-overview" class="tab-content active">
                <!-- æœ€è¿‘æˆç»©å¡ç‰‡ -->
                <div id="recent-score-card" class="card-bright p-8 mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6">æœ€è¿‘æˆç»©</h2>
                    <div id="recent-score-content"></div>
                </div>

                <!-- æ€»è€ƒè¯•æ¬¡æ•° -->
                <div class="card-bright p-6 mb-6">
                    <div class="text-gray-500 text-sm mb-2 font-medium">æ€»è€ƒè¯•æ¬¡æ•°</div>
                    <div id="total-count" class="text-4xl font-bold text-emerald-600">0</div>
                </div>
            </div>

            <!-- é›…æ€ç»Ÿè®¡ Tab -->
            <div id="tab-content-ielts" class="tab-content">
                <!-- ç»Ÿè®¡å¡ç‰‡ -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="stat-card p-6">
                        <div class="text-gray-500 text-sm mb-2 font-medium">é›…æ€æœ€ä½³ Overall</div>
                        <div id="ielts-best" class="text-4xl font-bold text-blue-600">-</div>
                    </div>
                    <div class="stat-card p-6">
                        <div class="text-gray-500 text-sm mb-2 font-medium">é›…æ€å¹³å‡ Overall</div>
                        <div id="ielts-avg" class="text-4xl font-bold text-purple-600">-</div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="stat-card p-6">
                        <div class="text-gray-500 text-sm mb-2 font-medium">é›…æ€è€ƒè¯•æ¬¡æ•°</div>
                        <div id="ielts-count" class="text-4xl font-bold text-emerald-600">-</div>
                    </div>
                    <div class="stat-card p-6">
                        <div class="text-gray-500 text-sm mb-2 font-medium">æœ€è¿‘ä¸€æ¬¡é›…æ€</div>
                        <div id="ielts-latest" class="text-4xl font-bold text-gray-600">-</div>
                    </div>
                </div>

                <!-- é›…æ€åˆ†æ•°è¶‹åŠ¿å›¾ -->
                <div class="chart-container">
                    <h3 class="chart-title">ğŸ“ˆ é›…æ€åˆ†æ•°è¶‹åŠ¿</h3>
                    <div class="chart-wrapper">
                        <canvas id="ielts-chart"></canvas>
                    </div>
                    <div id="ielts-no-data" class="no-data-message" style="display: none;">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        <p>æš‚æ— é›…æ€æ•°æ®ï¼Œè¯·å…ˆå½•å…¥æˆç»©</p>
                    </div>
                </div>
            </div>

            <!-- å››å…­çº§ç»Ÿè®¡ Tab -->
            <div id="tab-content-cet" class="tab-content">
                <!-- ç»Ÿè®¡å¡ç‰‡ -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="stat-card p-6">
                        <div class="text-gray-500 text-sm mb-2 font-medium">å››çº§æœ€ä½³</div>
                        <div id="cet4-best" class="text-4xl font-bold text-blue-600">-</div>
                    </div>
                    <div class="stat-card p-6">
                        <div class="text-gray-500 text-sm mb-2 font-medium">å››çº§å¹³å‡</div>
                        <div id="cet4-avg" class="text-4xl font-bold text-purple-600">-</div>
                    </div>
                    <div class="stat-card p-6">
                        <div class="text-gray-500 text-sm mb-2 font-medium">å…­çº§æœ€ä½³</div>
                        <div id="cet6-best" class="text-4xl font-bold text-blue-600">-</div>
                    </div>
                    <div class="stat-card p-6">
                        <div class="text-gray-500 text-sm mb-2 font-medium">å…­çº§å¹³å‡</div>
                        <div id="cet6-avg" class="text-4xl font-bold text-purple-600">-</div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="stat-card p-6">
                        <div class="text-gray-500 text-sm mb-2 font-medium">å››çº§è€ƒè¯•æ¬¡æ•°</div>
                        <div id="cet4-count" class="text-4xl font-bold text-emerald-600">-</div>
                    </div>
                    <div class="stat-card p-6">
                        <div class="text-gray-500 text-sm mb-2 font-medium">å…­çº§è€ƒè¯•æ¬¡æ•°</div>
                        <div id="cet6-count" class="text-4xl font-bold text-emerald-600">-</div>
                    </div>
                </div>

                <!-- CET-4 åˆ†æ•°è¶‹åŠ¿å›¾ -->
                <div class="chart-container">
                    <h3 class="chart-title">ğŸ“ˆ CET-4 åˆ†æ•°è¶‹åŠ¿</h3>
                    <div class="chart-wrapper">
                        <canvas id="cet4-chart"></canvas>
                    </div>
                    <div id="cet4-no-data" class="no-data-message" style="display: none;">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        <p>æš‚æ— å››çº§æ•°æ®ï¼Œè¯·å…ˆå½•å…¥æˆç»©</p>
                    </div>
                </div>

                <!-- CET-6 åˆ†æ•°è¶‹åŠ¿å›¾ -->
                <div class="chart-container">
                    <h3 class="chart-title">ğŸ“ˆ CET-6 åˆ†æ•°è¶‹åŠ¿</h3>
                    <div class="chart-wrapper">
                        <canvas id="cet6-chart"></canvas>
                    </div>
                    <div id="cet6-no-data" class="no-data-message" style="display: none;">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        <p>æš‚æ— å…­çº§æ•°æ®ï¼Œè¯·å…ˆå½•å…¥æˆç»©</p>
                    </div>
                </div>
            </div>

            <!-- æ•°æ®ç®¡ç†åŒºåŸŸ -->
            <div class="data-management-section">
                <div class="data-management-title">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                    </svg>
                    <h2>æ•°æ®ç®¡ç†</h2>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- å¯¼å‡ºå¤‡ä»½ -->
                    <div class="data-card data-card-export">
                        <div class="data-card-icon">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                        </div>
                        <h3 class="data-card-title">å¯¼å‡ºå¤‡ä»½</h3>
                        <p class="data-card-description">å°†æ‰€æœ‰æˆç»©è®°å½•å¯¼å‡ºä¸º JSON æ–‡ä»¶ï¼Œæ”¯æŒå®Œæ•´å¤‡ä»½å’Œè·¨è®¾å¤‡æ•°æ®è¿ç§»ã€‚</p>
                        <button onclick="exportData()" class="data-card-btn btn-export">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                            å¯¼å‡ºæ•°æ®
                        </button>
                        <div class="data-stats" id="export-stats">
                            <div class="data-stat-item">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                <span>è®°å½•æ•°é‡:</span>
                                <span class="data-stat-value" id="record-count">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- å¯¼å…¥å¤‡ä»½ -->
                    <div class="data-card data-card-import">
                        <div class="data-card-icon">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                            </svg>
                        </div>
                        <h3 class="data-card-title">å¯¼å…¥å¤‡ä»½</h3>
                        <p class="data-card-description">ä» JSON æ–‡ä»¶æ¢å¤æˆç»©è®°å½•ã€‚ç³»ç»Ÿé‡‡ç”¨æ™ºèƒ½å»é‡æœºåˆ¶ï¼Œè‡ªåŠ¨è¿‡æ»¤é‡å¤æ•°æ®ã€‚</p>
                        <div class="file-upload-area">
                            <label class="file-upload-btn">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                                </svg>
                                é€‰æ‹© JSON æ–‡ä»¶å¯¼å…¥
                            </label>
                            <input type="file" id="import-file-input" class="file-upload-input" onchange="handleFileSelect(event)">
                        </div>
                        <div id="file-status" class="file-status">æš‚æœªé€‰æ‹©æ–‡ä»¶</div>
                    </div>
                </div>
            </div>

            <!-- å†å²è®°å½• -->
            <div class="card-bright p-8 mt-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800">å†å²è®°å½•</h2>
                    <button onclick="clearAllRecords()" class="text-red-500 hover:text-red-600 text-sm font-semibold transition-colors">æ¸…ç©ºæ‰€æœ‰è®°å½•</button>
                </div>
                <div id="records-list" class="space-y-3"></div>
            </div>
        </div>

        <!-- å½•å…¥æˆç»©é¡µé¢ -->
        <div id="page-entry" class="page hidden">
            <!-- è€ƒè¯•ç±»å‹é€‰æ‹© -->
            <div class="card-bright p-6 mb-6">
                <h2 class="text-lg font-semibold text-gray-800 mb-4">é€‰æ‹©è€ƒè¯•ç±»å‹</h2>
                <div class="flex gap-3">
                    <button onclick="switchExamType('ielts')" id="btn-ielts" class="exam-type-btn active px-6 py-3 rounded-lg font-semibold">é›…æ€</button>
                    <button onclick="switchExamType('cet4')" id="btn-cet4" class="exam-type-btn px-6 py-3 rounded-lg font-semibold text-gray-700">å››çº§ (CET-4)</button>
                    <button onclick="switchExamType('cet6')" id="btn-cet6" class="exam-type-btn px-6 py-3 rounded-lg font-semibold text-gray-700">å…­çº§ (CET-6)</button>
                </div>
            </div>

            <!-- é›…æ€è¡¨å•å®¹å™¨ -->
            <div id="ielts-form-container">
                <div class="card-bright p-8 mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6">å½•å…¥é›…æ€æˆç»©</h2>
                    <form id="ielts-form" class="space-y-6">
                        <!-- è€ƒè¯•æ—¥æœŸ -->
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2">è€ƒè¯•æ—¥æœŸ</label>
                            <input type="date" id="ielts-exam-date" required class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                            <div id="ielts-date-warning" class="input-warning"></div>
                        </div>

                        <!-- å¬åŠ› -->
                        <div class="accordion-item subject-card subject-card-listening" id="ielts-listening-accordion">
                            <div class="accordion-header" onclick="toggleAccordion('ielts-listening')">
                                <h3 class="text-lg font-bold text-blue-700">Listening</h3>
                                <div class="flex items-center gap-2">
                                    <span class="text-sm text-gray-500" id="ielts-listening-status">æœªå¡«å†™</span>
                                    <svg class="accordion-arrow w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="accordion-content" id="ielts-listening-content">
                                <div class="p-6 pt-0 space-y-4">
                                    <div>
                                        <label class="block text-blue-600 text-sm font-medium mb-2">æ­£ç¡®é¢˜æ•° (0-40)</label>
                                        <input type="number" id="ielts-listening-raw" min="0" max="40" required placeholder="è¯·è¾“å…¥æ­£ç¡®é¢˜æ•° (0-40)" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                        <div id="ielts-listening-warning" class="input-warning"></div>
                                    </div>
                                    <div class="bg-white/70 rounded-lg p-4 border-2 border-blue-300">
                                        <div class="text-blue-600 text-sm font-medium">æŠ˜ç®—åˆ†</div>
                                        <div id="ielts-listening-score" class="text-3xl font-bold text-blue-700">0.0</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- é˜…è¯» -->
                        <div class="accordion-item subject-card subject-card-reading" id="ielts-reading-accordion">
                            <div class="accordion-header" onclick="toggleAccordion('ielts-reading')">
                                <h3 class="text-lg font-bold text-emerald-700">Reading (Academic)</h3>
                                <div class="flex items-center gap-2">
                                    <span class="text-sm text-gray-500" id="ielts-reading-status">æœªå¡«å†™</span>
                                    <svg class="accordion-arrow w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="accordion-content" id="ielts-reading-content">
                                <div class="p-6 pt-0 space-y-4">
                                    <div>
                                        <label class="block text-emerald-600 text-sm font-medium mb-2">æ­£ç¡®é¢˜æ•° (0-40)</label>
                                        <input type="number" id="ielts-reading-raw" min="0" max="40" required placeholder="è¯·è¾“å…¥æ­£ç¡®é¢˜æ•° (0-40)" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                        <div id="ielts-reading-warning" class="input-warning"></div>
                                    </div>
                                    <div class="bg-white/70 rounded-lg p-4 border-2 border-emerald-300">
                                        <div class="text-emerald-600 text-sm font-medium">æŠ˜ç®—åˆ†</div>
                                        <div id="ielts-reading-score" class="text-3xl font-bold text-emerald-700">0.0</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- å†™ä½œ -->
                        <div class="accordion-item subject-card subject-card-writing" id="ielts-writing-accordion">
                            <div class="accordion-header" onclick="toggleAccordion('ielts-writing')">
                                <h3 class="text-lg font-bold text-amber-700">Writing</h3>
                                <div class="flex items-center gap-2">
                                    <span class="text-sm text-gray-500" id="ielts-writing-status">æœªå¡«å†™</span>
                                    <svg class="accordion-arrow w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="accordion-content" id="ielts-writing-content">
                                <div class="p-6 pt-0 space-y-4">
                                    <div>
                                        <label class="block text-amber-600 text-sm font-medium mb-2">æ€»åˆ† (0-9ï¼Œæ­¥é•¿0.5)</label>
                                        <input type="number" id="ielts-writing-score" min="0" max="9" step="0.5" required placeholder="è¯·è¾“å…¥æ€»åˆ† (0-9)" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                        <div id="ielts-writing-warning" class="input-warning"></div>
                                    </div>
                                    <div class="pt-4 space-y-3 border-t-2 border-amber-300 mt-4">
                                        <div>
                                            <label class="block text-amber-600 text-sm font-medium mb-2">Task 1 (å°ä½œæ–‡)</label>
                                            <input type="number" id="ielts-writing-task1" min="0" max="9" step="0.5" placeholder="è¯·è¾“å…¥Task1åˆ†æ•°" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                            <div id="ielts-task1-warning" class="input-warning"></div>
                                        </div>
                                        <div>
                                            <label class="block text-amber-600 text-sm font-medium mb-2">Task 2 (å¤§ä½œæ–‡)</label>
                                            <input type="number" id="ielts-writing-task2" min="0" max="9" step="0.5" placeholder="è¯·è¾“å…¥Task2åˆ†æ•°" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                            <div id="ielts-task2-warning" class="input-warning"></div>
                                        </div>
                                        <div class="bg-white/70 rounded-lg p-3 border-2 border-amber-300">
                                            <div class="text-amber-600 text-sm font-medium">è‡ªåŠ¨è®¡ç®—</div>
                                            <div id="ielts-writing-calculated" class="text-xl font-bold text-amber-700">-</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- å£è¯­ -->
                        <div class="accordion-item subject-card subject-card-speaking" id="ielts-speaking-accordion">
                            <div class="accordion-header" onclick="toggleAccordion('ielts-speaking')">
                                <h3 class="text-lg font-bold text-purple-700">Speaking</h3>
                                <div class="flex items-center gap-2">
                                    <span class="text-sm text-gray-500" id="ielts-speaking-status">æœªå¡«å†™</span>
                                    <svg class="accordion-arrow w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="accordion-content" id="ielts-speaking-content">
                                <div class="p-6 pt-0 space-y-4">
                                    <div>
                                        <label class="block text-purple-600 text-sm font-medium mb-2">æ€»åˆ† (0-9ï¼Œæ­¥é•¿0.5)</label>
                                        <input type="number" id="ielts-speaking-score" min="0" max="9" step="0.5" required placeholder="è¯·è¾“å…¥æ€»åˆ† (0-9)" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                        <div id="ielts-speaking-warning" class="input-warning"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Overall é¢„è§ˆ -->
                        <div class="bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl p-6 border-2 border-emerald-300">
                            <div class="text-emerald-700 text-sm mb-3 font-semibold">Overall æ€»åˆ†é¢„è§ˆ</div>
                            <div class="flex items-center justify-between flex-wrap gap-4">
                                <div class="text-gray-600 font-medium">L: <span id="ielts-overall-l" class="text-blue-700 font-bold">0.0</span></div>
                                <div class="text-gray-600 font-medium">R: <span id="ielts-overall-r" class="text-emerald-700 font-bold">0.0</span></div>
                                <div class="text-gray-600 font-medium">W: <span id="ielts-overall-w" class="text-amber-700 font-bold">0.0</span></div>
                                <div class="text-gray-600 font-medium">S: <span id="ielts-overall-s" class="text-purple-700 font-bold">0.0</span></div>
                                <div class="text-right">
                                    <div class="text-emerald-600 text-sm font-medium">Overall</div>
                                    <div id="ielts-overall-score" class="text-5xl font-bold gradient-text-bright">0.0</div>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="w-full btn-primary text-white font-bold py-4 px-6 rounded-lg shadow-lg">ä¿å­˜æˆç»©</button>
                    </form>
                </div>
            </div>

            <!-- å››å…­çº§è¡¨å•å®¹å™¨ -->
            <div id="cet-form-container" class="hidden">
                <div class="card-bright p-8 mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6">å½•å…¥<span id="cet-exam-title">å››çº§</span>æˆç»©</h2>
                    <form id="cet-form" class="space-y-6">
                        <!-- è€ƒè¯•æ—¥æœŸ -->
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2">è€ƒè¯•æ—¥æœŸ</label>
                            <input type="date" id="cet-exam-date" required class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                            <div id="cet-date-warning" class="input-warning"></div>
                        </div>

                        <!-- å¬åŠ› -->
                        <div class="accordion-item subject-card subject-card-listening" id="cet-listening-accordion">
                            <div class="accordion-header" onclick="toggleAccordion('cet-listening')">
                                <h3 class="text-lg font-bold text-blue-700">å¬åŠ› (35%ï¼Œæ»¡åˆ†249åˆ†)</h3>
                                <div class="flex items-center gap-2">
                                    <span class="text-sm text-gray-500" id="cet-listening-status">æœªå¡«å†™</span>
                                    <svg class="accordion-arrow w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="accordion-content" id="cet-listening-content">
                                <div class="p-6 pt-0 space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label class="block text-blue-600 text-sm font-medium mb-2" id="listening-sectiona-label">çŸ­å¯¹è¯/æ–°é—» (7.1åˆ†/é¢˜)</label>
                                            <input type="number" id="cet-listening-sectiona" min="0" max="8" required placeholder="é¢˜æ•° (0-8)" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                            <div id="cet-sectiona-warning" class="input-warning"></div>
                                        </div>
                                        <div>
                                            <label class="block text-blue-600 text-sm font-medium mb-2" id="listening-sectionb-label">é•¿å¯¹è¯ (7.1åˆ†/é¢˜)</label>
                                            <input type="number" id="cet-listening-sectionb" min="0" max="7" required placeholder="é¢˜æ•° (0-7)" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                            <div id="cet-sectionb-warning" class="input-warning"></div>
                                        </div>
                                        <div>
                                            <label class="block text-blue-600 text-sm font-medium mb-2" id="listening-sectionc-label">çŸ­æ–‡ (14.2åˆ†/é¢˜)</label>
                                            <input type="number" id="cet-listening-sectionc" min="0" max="10" required placeholder="é¢˜æ•° (0-10)" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                            <div id="cet-sectionc-warning" class="input-warning"></div>
                                        </div>
                                    </div>
                                    <div class="bg-white/70 rounded-lg p-4 border-2 border-blue-300">
                                        <div class="flex justify-between items-center">
                                            <div class="text-blue-600 text-sm font-medium">å¬åŠ›æ€»åˆ†</div>
                                            <div id="cet-listening-total" class="text-3xl font-bold text-blue-700">0</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- é˜…è¯» -->
                        <div class="accordion-item subject-card subject-card-reading" id="cet-reading-accordion">
                            <div class="accordion-header" onclick="toggleAccordion('cet-reading')">
                                <h3 class="text-lg font-bold text-emerald-700">é˜…è¯» (35%ï¼Œæ»¡åˆ†249åˆ†)</h3>
                                <div class="flex items-center gap-2">
                                    <span class="text-sm text-gray-500" id="cet-reading-status">æœªå¡«å†™</span>
                                    <svg class="accordion-arrow w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="accordion-content" id="cet-reading-content">
                                <div class="p-6 pt-0 space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label class="block text-emerald-600 text-sm font-medium mb-2">é€‰è¯å¡«ç©º (3.55åˆ†/é¢˜)</label>
                                            <input type="number" id="cet-reading-wordbank" min="0" max="10" required placeholder="é¢˜æ•° (0-10)" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                            <div id="cet-wordbank-warning" class="input-warning"></div>
                                        </div>
                                        <div>
                                            <label class="block text-emerald-600 text-sm font-medium mb-2">é•¿ç¯‡é˜…è¯» (7.1åˆ†/é¢˜)</label>
                                            <input type="number" id="cet-reading-skimming" min="0" max="10" required placeholder="é¢˜æ•° (0-10)" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                            <div id="cet-skimming-warning" class="input-warning"></div>
                                        </div>
                                        <div>
                                            <label class="block text-emerald-600 text-sm font-medium mb-2">ä»”ç»†é˜…è¯» (14.2åˆ†/é¢˜)</label>
                                            <input type="number" id="cet-reading-reading" min="0" max="10" required placeholder="é¢˜æ•° (0-10)" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                            <div id="cet-reading-warning" class="input-warning"></div>
                                        </div>
                                    </div>
                                    <div class="bg-white/70 rounded-lg p-4 border-2 border-emerald-300">
                                        <div class="flex justify-between items-center">
                                            <div class="text-emerald-600 text-sm font-medium">é˜…è¯»æ€»åˆ†</div>
                                            <div id="cet-reading-total" class="text-3xl font-bold text-emerald-700">0</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- å†™ä½œ -->
                        <div class="accordion-item subject-card subject-card-writing" id="cet-writing-accordion">
                            <div class="accordion-header" onclick="toggleAccordion('cet-writing')">
                                <h3 class="text-lg font-bold text-amber-700">å†™ä½œ (15%ï¼Œæ»¡åˆ†106.5åˆ†)</h3>
                                <div class="flex items-center gap-2">
                                    <span class="text-sm text-gray-500" id="cet-writing-status">æœªå¡«å†™</span>
                                    <svg class="accordion-arrow w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="accordion-content" id="cet-writing-content">
                                <div class="p-6 pt-0 space-y-4">
                                    <div>
                                        <label class="block text-amber-600 text-sm font-medium mb-2">åŸå§‹åˆ† (0-15åˆ†)</label>
                                        <input type="number" id="cet-writing-raw" min="0" max="15" step="0.5" required placeholder="è¯·è¾“å…¥åŸå§‹åˆ†" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                        <div id="cet-writing-warning" class="input-warning"></div>
                                    </div>
                                    <div class="bg-white/70 rounded-lg p-4 border-2 border-amber-300">
                                        <div class="flex justify-between items-center">
                                            <div class="text-amber-600 text-sm font-medium">æŠ¥é“åˆ†</div>
                                            <div id="cet-writing-score" class="text-3xl font-bold text-amber-700">0</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ç¿»è¯‘ -->
                        <div class="accordion-item subject-card subject-card-translation" id="cet-translation-accordion">
                            <div class="accordion-header" onclick="toggleAccordion('cet-translation')">
                                <h3 class="text-lg font-bold text-red-700">ç¿»è¯‘ (15%ï¼Œæ»¡åˆ†106.5åˆ†)</h3>
                                <div class="flex items-center gap-2">
                                    <span class="text-sm text-gray-500" id="cet-translation-status">æœªå¡«å†™</span>
                                    <svg class="accordion-arrow w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="accordion-content" id="cet-translation-content">
                                <div class="p-6 pt-0 space-y-4">
                                    <div>
                                        <label class="block text-red-600 text-sm font-medium mb-2">åŸå§‹åˆ† (0-15åˆ†)</label>
                                        <input type="number" id="cet-translation-raw" min="0" max="15" step="0.5" required placeholder="è¯·è¾“å…¥åŸå§‹åˆ†" class="w-full input-bright rounded-lg px-4 py-3 text-gray-900">
                                        <div id="cet-translation-warning" class="input-warning"></div>
                                    </div>
                                    <div class="bg-white/70 rounded-lg p-4 border-2 border-red-300">
                                        <div class="flex justify-between items-center">
                                            <div class="text-red-600 text-sm font-medium">æŠ¥é“åˆ†</div>
                                            <div id="cet-translation-score" class="text-3xl font-bold text-red-700">0</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ€»åˆ†é¢„è§ˆ -->
                        <div class="bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl p-6 border-2 border-emerald-300">
                            <div class="text-emerald-700 text-sm mb-3 font-semibold">æ€»åˆ†é¢„è§ˆ (æ»¡åˆ†710åˆ†)</div>
                            <div class="flex items-center justify-between flex-wrap gap-4">
                                <div class="text-gray-600 font-medium">å¬åŠ›: <span id="cet-total-listening" class="text-blue-700 font-bold">0</span></div>
                                <div class="text-gray-600 font-medium">é˜…è¯»: <span id="cet-total-reading" class="text-emerald-700 font-bold">0</span></div>
                                <div class="text-gray-600 font-medium">å†™ä½œå’Œç¿»è¯‘: <span id="cet-total-wt" class="text-orange-600 font-bold">0</span></div>
                                <div class="text-right">
                                    <div class="text-emerald-600 text-sm font-medium">æ€»åˆ†</div>
                                    <div id="cet-total-score" class="text-5xl font-bold gradient-text-bright">0</div>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="w-full btn-primary text-white font-bold py-4 px-6 rounded-lg shadow-lg">ä¿å­˜æˆç»©</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== å…¨å±€å˜é‡ ====================
        let currentExamType = 'ielts';
        let ieltsChartInstance = null;
        let cet4ChartInstance = null;
        let cet6ChartInstance = null;
        const STORAGE_KEY = 'myscore_records';

        // ==================== æ•°æ®å­˜å‚¨å‡½æ•° ====================
        function getRecords() {
            if (localStorage.getItem(STORAGE_KEY)) {
                return JSON.parse(localStorage.getItem(STORAGE_KEY));
            }
            return [];
        }

        function saveRecord(record) {
            const records = getRecords();
            records.push(record);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(records));
        }

        function clearAllRecords() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æˆç»©è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                localStorage.removeItem(STORAGE_KEY);
                updateUI();
            }
        }

        function deleteRecord(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) {
                const records = getRecords();
                const newRecords = records.filter(r => r.id !== id);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(newRecords));
                updateUI();
            }
        }

        // ==================== Tab åˆ‡æ¢å‡½æ•° ====================
        function switchDashboardTab(tabName) {
            // æ›´æ–° Tab æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.dashboard-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(`tab-${tabName}`).classList.add('active');

            // æ›´æ–° Tab å†…å®¹æ˜¾ç¤º
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`tab-content-${tabName}`).classList.add('active');

            // æ ¹æ® Tab æ¸²æŸ“å¯¹åº”çš„å›¾è¡¨
            if (tabName === 'ielts') {
                setTimeout(renderIeltsChart, 100);
            } else if (tabName === 'cet') {
                setTimeout(() => {
                    renderCet4Chart();
                    renderCet6Chart();
                }, 100);
            }
        }

        // ==================== Chart.js å›¾è¡¨æ¸²æŸ“å‡½æ•° ====================
        function renderIeltsChart() {
            const records = getRecords().filter(r => r.examType === 'ielts');
            const noDataEl = document.getElementById('ielts-no-data');
            const chartEl = document.getElementById('ielts-chart').parentElement;

            // å¦‚æœå·²æœ‰å›¾è¡¨å®ä¾‹ï¼Œå…ˆé”€æ¯
            if (ieltsChartInstance) {
                ieltsChartInstance.destroy();
                ieltsChartInstance = null;
            }

            if (records.length === 0) {
                noDataEl.style.display = 'block';
                chartEl.style.display = 'none';
                return;
            }

            noDataEl.style.display = 'none';
            chartEl.style.display = 'block';

            // æŒ‰æ—¥æœŸæ’åº
            const sorted = [...records].sort((a, b) => new Date(a.date) - new Date(b.date));

            const ctx = document.getElementById('ielts-chart').getContext('2d');
            ieltsChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sorted.map(r => r.date),
                    datasets: [
                        {
                            label: 'Overall',
                            data: sorted.map(r => r.overall),
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.3,
                            pointRadius: 5
                        },
                        {
                            label: 'Listening',
                            data: sorted.map(r => r.listening.score),
                            borderColor: '#3b82f6',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: 'Reading',
                            data: sorted.map(r => r.reading.score),
                            borderColor: '#10b981',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: 'Writing',
                            data: sorted.map(r => r.writing.score),
                            borderColor: '#f59e0b',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: 'Speaking',
                            data: sorted.map(r => r.speaking.score),
                            borderColor: '#8b5cf6',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 9,
                            ticks: {
                                stepSize: 1,
                                font: {
                                    size: 12
                                },
                                padding: 15
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            offset: true
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    }
                }
            });
        }

        function renderCet4Chart() {
            const records = getRecords().filter(r => r.examType === 'cet' && r.examLevel === 'cet4');
            const noDataEl = document.getElementById('cet4-no-data');
            const chartEl = document.getElementById('cet4-chart').parentElement;

            if (cet4ChartInstance) {
                cet4ChartInstance.destroy();
                cet4ChartInstance = null;
            }

            if (records.length === 0) {
                noDataEl.style.display = 'block';
                chartEl.style.display = 'none';
                return;
            }

            noDataEl.style.display = 'none';
            chartEl.style.display = 'block';

            const sorted = [...records].sort((a, b) => new Date(a.date) - new Date(b.date));

            const ctx = document.getElementById('cet4-chart').getContext('2d');
            cet4ChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sorted.map(r => r.date),
                    datasets: [
                        {
                            label: 'æ€»åˆ†',
                            data: sorted.map(r => r.total),
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.3,
                            pointRadius: 5
                        },
                        {
                            label: 'å¬åŠ›',
                            data: sorted.map(r => r.listening.total),
                            borderColor: '#3b82f6',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: 'é˜…è¯»',
                            data: sorted.map(r => r.reading.total),
                            borderColor: '#10b981',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: 'å†™ä½œå’Œç¿»è¯‘',
                            data: sorted.map(r => r.writing.score + r.translation.score),
                            borderColor: '#f59e0b',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 300,
                            max: 710,
                            ticks: {
                                stepSize: 50,
                                font: {
                                    size: 12
                                },
                                padding: 10
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    }
                }
            });
        }

        function renderCet6Chart() {
            const records = getRecords().filter(r => r.examType === 'cet' && r.examLevel === 'cet6');
            const noDataEl = document.getElementById('cet6-no-data');
            const chartEl = document.getElementById('cet6-chart').parentElement;

            if (cet6ChartInstance) {
                cet6ChartInstance.destroy();
                cet6ChartInstance = null;
            }

            if (records.length === 0) {
                noDataEl.style.display = 'block';
                chartEl.style.display = 'none';
                return;
            }

            noDataEl.style.display = 'none';
            chartEl.style.display = 'block';

            const sorted = [...records].sort((a, b) => new Date(a.date) - new Date(b.date));

            const ctx = document.getElementById('cet6-chart').getContext('2d');
            cet6ChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sorted.map(r => r.date),
                    datasets: [
                        {
                            label: 'æ€»åˆ†',
                            data: sorted.map(r => r.total),
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.3,
                            pointRadius: 5
                        },
                        {
                            label: 'å¬åŠ›',
                            data: sorted.map(r => r.listening.total),
                            borderColor: '#3b82f6',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: 'é˜…è¯»',
                            data: sorted.map(r => r.reading.total),
                            borderColor: '#10b981',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: 'å†™ä½œå’Œç¿»è¯‘',
                            data: sorted.map(r => r.writing.score + r.translation.score),
                            borderColor: '#f59e0b',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 300,
                            max: 710,
                            ticks: {
                                stepSize: 50,
                                font: {
                                    size: 12
                                },
                                padding: 10
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    }
                }
            });
        }

        // ==================== åˆ†æ•°è®¡ç®—å‡½æ•° ====================
        function roundUp(score) {
            return Math.ceil(score);
        }

        // Writing Task è®¡ç®— (Task2æƒé‡2/3, Task1æƒé‡1/3)
        function calculateWritingScore(task1, task2) {
            if (task1 === null || task2 === null) return null;
            const score = (task2 * 2 + task1) / 3;
            return Math.round(score * 2) / 2; // å››èˆäº”å…¥åˆ°åŠåˆ†
        }

        // é›…æ€å¬åŠ›è¯„åˆ†è¡¨
        function calculateListeningScore(correctCount) {
            const scoreTable = [
                { range: [39, 40], score: 9.0 },
                { range: [37, 38], score: 8.5 },
                { range: [35, 36], score: 8.0 },
                { range: [32, 34], score: 7.5 },
                { range: [30, 31], score: 7.0 },
                { range: [26, 29], score: 6.5 },
                { range: [23, 25], score: 6.0 },
                { range: [18, 22], score: 5.5 },
                { range: [16, 17], score: 5.0 },
                { range: [13, 15], score: 4.5 },
                { range: [10, 12], score: 4.0 },
                { range: [6, 9], score: 3.5 },
                { range: [4, 5], score: 3.0 },
                { range: [3, 3], score: 2.5 },
                { range: [2, 2], score: 2.0 },
                { range: [1, 1], score: 1.0 },
                { range: [0, 0], score: 0.5 }
            ];

            for (const item of scoreTable) {
                if (correctCount >= item.range[0] && correctCount <= item.range[1]) {
                    return item.score;
                }
            }
            return 0.0;
        }

        // é›…æ€é˜…è¯»è¯„åˆ†è¡¨
        function calculateReadingScore(correctCount) {
            const scoreTable = [
                { range: [39, 40], score: 9.0 },
                { range: [37, 38], score: 8.5 },
                { range: [35, 36], score: 8.0 },
                { range: [33, 34], score: 7.5 },
                { range: [30, 32], score: 7.0 },
                { range: [27, 29], score: 6.5 },
                { range: [23, 26], score: 6.0 },
                { range: [19, 22], score: 5.5 },
                { range: [15, 18], score: 5.0 },
                { range: [13, 14], score: 4.5 },
                { range: [10, 12], score: 4.0 },
                { range: [8, 9], score: 3.5 },
                { range: [6, 7], score: 3.0 },
                { range: [4, 5], score: 2.5 },
                { range: [3, 3], score: 2.5 },
                { range: [2, 2], score: 2.0 },
                { range: [1, 1], score: 1.0 },
                { range: [0, 0], score: 0.5 }
            ];

            for (const item of scoreTable) {
                if (correctCount >= item.range[0] && correctCount <= item.range[1]) {
                    return item.score;
                }
            }
            return 0.0;
        }

        function calculateOverall(listening, reading, writing, speaking) {
            const avg = (listening + reading + writing + speaking) / 4;
            const dec = avg - Math.floor(avg);

            if (dec >= 0.25 && dec < 0.5) {
                return Math.floor(avg) + 0.5;
            }
            if (dec >= 0.75) {
                return Math.floor(avg) + 1.0;
            }
            return Math.round(avg * 2) / 2;
        }

        function calculateCetListening(sectionA, sectionB, sectionC) {
            return roundUp(sectionA * 7.1 + sectionB * 7.1 + sectionC * 14.2);
        }

        function calculateCetReading(wordBank, skimming, reading) {
            return roundUp(wordBank * 3.55 + skimming * 7.1 + reading * 14.2);
        }

        function convertRawToReportScore(raw) {
            return roundUp(raw * 7.1);
        }

        // ==================== è¾“å…¥éªŒè¯å‡½æ•° ====================
        function validateNumberInput(input, min, max, warningId) {
            const el = document.getElementById(warningId);
            const val = parseFloat(input.value);

            if (input.value && (isNaN(val) || val < min || val > max)) {
                el.textContent = `è¯·è¾“å…¥ ${min} åˆ° ${max} ä¹‹é—´çš„æ•°å€¼`;
                input.classList.add('input-error');
                return false;
            } else {
                el.textContent = '';
                input.classList.remove('input-error');
                return true;
            }
        }

        // ==================== æ‰‹é£ç´åŠŸèƒ½ ====================
        function toggleAccordion(itemName) {
            const content = document.getElementById(`${itemName}-content`);
            const arrow = document.querySelector(`#${itemName}-accordion .accordion-arrow`);
            const status = document.getElementById(`${itemName}-status`);

            const isExpanded = content.classList.contains('expanded');

            document.querySelectorAll('.accordion-content').forEach(c => {
                c.classList.remove('expanded');
            });
            document.querySelectorAll('.accordion-arrow').forEach(a => {
                a.classList.remove('expanded');
            });
            document.querySelectorAll('[id$="-status"]').forEach(s => {
                s.textContent = 'å·²æŠ˜å ';
            });

            if (!isExpanded) {
                content.classList.add('expanded');
                if (arrow) {
                    arrow.classList.add('expanded');
                }
                if (status) {
                    status.textContent = 'å·²å±•å¼€';
                }
            }
        }

        function initAccordions() {
            const firstAccordion = document.querySelector('.accordion-item');
            if (firstAccordion) {
                const itemName = firstAccordion.id.replace('-accordion', '');
                const content = document.getElementById(`${itemName}-content`);
                const arrow = firstAccordion.querySelector('.accordion-arrow');
                const status = document.getElementById(`${itemName}-status`);

                content.classList.add('expanded');
                arrow.classList.add('expanded');
                status.textContent = 'å·²å±•å¼€';
            }
        }

        function updateAccordionStatus(inputId, statusId) {
            const input = document.getElementById(inputId);
            const status = document.getElementById(statusId);
            if (input && input.value && input.value.trim() !== '') {
                status.textContent = 'å·²å¡«å†™';
            } else {
                status.textContent = 'æœªå¡«å†™';
            }
        }

        // ==================== æ—¥æœŸæ ¼å¼åŒ–å‡½æ•° ====================
        function formatDateInput(input) {
            let digits = input.replace(/\D/g, '');
            if (digits.length === 8) {
                let year = digits.substring(0, 4);
                let month = digits.substring(4, 6);
                let day = digits.substring(6, 8);
                const date = new Date(year, month - 1, day);
                if (!isNaN(date.getTime())) {
                    return `${year}-${month}-${day}`;
                }
            }
            return '';
        }

        // ==================== è€ƒè¯•ç±»å‹åˆ‡æ¢ ====================
        function switchExamType(type) {
            currentExamType = type;

            document.querySelectorAll('.exam-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`btn-${type}`).classList.add('active');

            if (type === 'ielts') {
                document.getElementById('ielts-form-container').classList.remove('hidden');
                document.getElementById('cet-form-container').classList.add('hidden');
            } else {
                document.getElementById('ielts-form-container').classList.add('hidden');
                document.getElementById('cet-form-container').classList.remove('hidden');
                
                if (type === 'cet4') {
                    document.getElementById('cet-exam-title').textContent = 'å››çº§';
                    document.getElementById('listening-sectiona-label').textContent = 'çŸ­å¯¹è¯/æ–°é—»';
                    document.getElementById('listening-sectionc-label').textContent = 'çŸ­æ–‡';
                } else {
                    document.getElementById('cet-exam-title').textContent = 'å…­çº§';
                    document.getElementById('listening-sectiona-label').textContent = 'é•¿å¯¹è¯';
                    document.getElementById('listening-sectionc-label').textContent = 'è®²åº§/æŠ¥é“';
                }
            }

            resetCurrentForm();
            setTimeout(initAccordions, 100);
        }

        function resetCurrentForm() {
            if (currentExamType === 'ielts') {
                document.getElementById('ielts-form').reset();
                document.getElementById('ielts-listening-score').textContent = '0.0';
                document.getElementById('ielts-reading-score').textContent = '0.0';
                document.getElementById('ielts-writing-calculated').textContent = '-';
                clearAllWarnings();
                updateIeltsOverallPreview();
            } else {
                document.getElementById('cet-form').reset();
                clearAllWarnings();
                updateCetTotalPreview();
            }
        }

        function clearAllWarnings() {
            const warnings = document.querySelectorAll('.input-warning');
            warnings.forEach(w => w.textContent = '');
            const errors = document.querySelectorAll('.input-error');
            errors.forEach(i => i.classList.remove('input-error'));
        }

        // ==================== å®æ—¶é¢„è§ˆåŠŸèƒ½ ====================
        function updateIeltsOverallPreview() {
            const l = parseFloat(document.getElementById('ielts-listening-score').textContent) || 0;
            const r = parseFloat(document.getElementById('ielts-reading-score').textContent) || 0;
            const w = parseFloat(document.getElementById('ielts-writing-score').value) || 0;
            const s = parseFloat(document.getElementById('ielts-speaking-score').value) || 0;
            
            document.getElementById('ielts-overall-l').textContent = l.toFixed(1);
            document.getElementById('ielts-overall-r').textContent = r.toFixed(1);
            document.getElementById('ielts-overall-w').textContent = w.toFixed(1);
            document.getElementById('ielts-overall-s').textContent = s.toFixed(1);
            
            const overall = calculateOverall(l, r, w, s);
            document.getElementById('ielts-overall-score').textContent = overall.toFixed(1);
        }

        function updateCetTotalPreview() {
            const sectionA = parseInt(document.getElementById('cet-listening-sectiona').value) || 0;
            const sectionB = parseInt(document.getElementById('cet-listening-sectionb').value) || 0;
            const sectionC = parseInt(document.getElementById('cet-listening-sectionc').value) || 0;

            const listeningTotal = calculateCetListening(sectionA, sectionB, sectionC);
            document.getElementById('cet-listening-total').textContent = listeningTotal;
            document.getElementById('cet-total-listening').textContent = listeningTotal;

            const wordBank = parseInt(document.getElementById('cet-reading-wordbank').value) || 0;
            const skimming = parseInt(document.getElementById('cet-reading-skimming').value) || 0;
            const reading = parseInt(document.getElementById('cet-reading-reading').value) || 0;

            const readingTotal = calculateCetReading(wordBank, skimming, reading);
            document.getElementById('cet-reading-total').textContent = readingTotal;
            document.getElementById('cet-total-reading').textContent = readingTotal;

            const writingRaw = parseFloat(document.getElementById('cet-writing-raw').value) || 0;
            const writingScore = convertRawToReportScore(writingRaw);
            document.getElementById('cet-writing-score').textContent = writingScore;

            const translationRaw = parseFloat(document.getElementById('cet-translation-raw').value) || 0;
            const translationScore = convertRawToReportScore(translationRaw);
            document.getElementById('cet-translation-score').textContent = translationScore;

            const wtTotal = writingScore + translationScore;
            document.getElementById('cet-total-wt').textContent = wtTotal;

            const total = listeningTotal + readingTotal + wtTotal;
            document.getElementById('cet-total-score').textContent = total;
        }

        // ==================== é¡µé¢åˆ‡æ¢ ====================
        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(p => {
                p.classList.add('hidden');
            });
            document.getElementById(`page-${pageName}`).classList.remove('hidden');

            document.getElementById('nav-dashboard').className = pageName === 'dashboard' 
                ? 'px-5 py-2.5 rounded-lg bg-emerald-500 text-white shadow-md' 
                : 'px-5 py-2.5 rounded-lg bg-gray-200 text-gray-700';
            document.getElementById('nav-entry').className = pageName === 'entry' 
                ? 'px-5 py-2.5 rounded-lg bg-emerald-500 text-white shadow-md' 
                : 'px-5 py-2.5 rounded-lg bg-gray-200 text-gray-700';

            updateUI();

            if (pageName === 'dashboard') {
                const activeTab = document.querySelector('.dashboard-tab.active').id;
                if (activeTab === 'tab-ielts') {
                    setTimeout(renderIeltsChart, 100);
                } else if (activeTab === 'tab-cet') {
                    setTimeout(() => {
                        renderCet4Chart();
                        renderCet6Chart();
                    }, 100);
                }
            } else if (pageName === 'entry') {
                setTimeout(initAccordions, 100);
            }
        }

        // ==================== æ›´æ–°ä»ªè¡¨ç›˜ ====================
        function updateUI() {
            const records = getRecords();
            updateDashboard(records);
            updateRecordsList(records);
            updateRecordStats();
        }

        function updateDashboard(records) {
            const recentScoreContent = document.getElementById('recent-score-content');
            const totalCountEl = document.getElementById('total-count');

            if (records.length === 0) {
                recentScoreContent.innerHTML = `
                    <div class="text-center py-12 text-gray-400">
                        <div class="text-6xl mb-4">æš‚æ— æ•°æ®</div>
                        <p class="text-xl text-gray-600 font-medium">è¿˜æ²¡æœ‰æˆç»©è®°å½•</p>
                        <p class="text-sm mt-2 text-gray-500">ç‚¹å‡»"å½•å…¥æˆç»©"å¼€å§‹è®°å½•ä½ çš„è¿›æ­¥</p>
                    </div>
                `;
                totalCountEl.textContent = '0';
                resetAllStatCards();
                return;
            }

            const latest = records[records.length - 1];

            if (latest.examType === 'ielts') {
                recentScoreContent.innerHTML = `
                    <div class="mb-6">
                        <div class="text-gray-500 text-sm font-medium">${latest.date || 'æœªçŸ¥æ—¥æœŸ'} - é›…æ€å­¦æœ¯ç±»</div>
                    </div>
                    <div class="bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl p-6 border-2 border-emerald-200">
                        <div class="text-center mb-6">
                            <div class="text-emerald-600 text-sm mb-2 font-semibold">Overall æ€»åˆ†</div>
                            <div class="text-6xl font-bold gradient-text-bright">${latest.overall?.toFixed(1) || '0.0'}</div>
                        </div>
                        <div class="grid grid-cols-4 gap-4 text-center">
                            <div class="bg-blue-50 rounded-lg p-3 border-2 border-blue-200">
                                <div class="text-blue-600 text-xs mb-1 font-semibold">Listening</div>
                                <div class="text-2xl font-bold text-blue-700">${latest.listening?.score?.toFixed(1) || '0.0'}</div>
                                <div class="text-blue-400 text-xs mt-1">${latest.listening?.raw || 0}/40</div>
                            </div>
                            <div class="bg-emerald-50 rounded-lg p-3 border-2 border-emerald-200">
                                <div class="text-emerald-600 text-xs mb-1 font-semibold">Reading</div>
                                <div class="text-2xl font-bold text-emerald-700">${latest.reading?.score?.toFixed(1) || '0.0'}</div>
                                <div class="text-emerald-400 text-xs mt-1">${latest.reading?.raw || 0}/40</div>
                            </div>
                            <div class="bg-amber-50 rounded-lg p-3 border-2 border-amber-200">
                                <div class="text-amber-600 text-xs mb-1 font-semibold">Writing</div>
                                <div class="text-2xl font-bold text-amber-700">${latest.writing?.score?.toFixed(1) || '0.0'}</div>
                            </div>
                            <div class="bg-purple-50 rounded-lg p-3 border-2 border-purple-200">
                                <div class="text-purple-600 text-xs mb-1 font-semibold">Speaking</div>
                                <div class="text-2xl font-bold text-purple-700">${latest.speaking?.score?.toFixed(1) || '0.0'}</div>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                const examName = latest.examLevel === 'cet4' ? 'å››çº§' : 'å…­çº§';

                recentScoreContent.innerHTML = `
                    <div class="mb-6">
                        <div class="text-gray-500 text-sm font-medium">${latest.date || 'æœªçŸ¥æ—¥æœŸ'} - å¤§å­¦${examName}</div>
                    </div>
                    <div class="bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl p-6 border-2 border-emerald-200">
                        <div class="text-center mb-6">
                            <div class="text-emerald-600 text-sm mb-2 font-semibold">æ€»åˆ† (æ»¡åˆ†710)</div>
                            <div class="text-6xl font-bold gradient-text-bright">${latest.total || 0}</div>
                        </div>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div class="bg-blue-50 rounded-lg p-3 border-2 border-blue-200">
                                <div class="text-blue-600 text-xs mb-1 font-semibold">å¬åŠ›</div>
                                <div class="text-2xl font-bold text-blue-700">${latest.listening?.total || 0}</div>
                                <div class="text-blue-400 text-xs mt-1">249åˆ†</div>
                            </div>
                            <div class="bg-emerald-50 rounded-lg p-3 border-2 border-emerald-200">
                                <div class="text-emerald-600 text-xs mb-1 font-semibold">é˜…è¯»</div>
                                <div class="text-2xl font-bold text-emerald-700">${latest.reading?.total || 0}</div>
                                <div class="text-emerald-400 text-xs mt-1">249åˆ†</div>
                            </div>
                            <div class="bg-orange-50 rounded-lg p-3 border-2 border-orange-200">
                                <div class="text-orange-600 text-xs mb-1 font-semibold">å†™ä½œå’Œç¿»è¯‘</div>
                                <div class="text-2xl font-bold text-orange-700">${(latest.writing?.score || 0) + (latest.translation?.score || 0)}</div>
                                <div class="text-orange-400 text-xs mt-1">213åˆ†</div>
                            </div>
                        </div>
                    </div>
                `;
            }

            totalCountEl.textContent = records.length;

            const ieltsRecords = records.filter(r => r.examType === 'ielts');
            const cet4Records = records.filter(r => r.examType === 'cet' && r.examLevel === 'cet4');
            const cet6Records = records.filter(r => r.examType === 'cet' && r.examLevel === 'cet6');

            // é›…æ€ç»Ÿè®¡
            const ieltsBestEl = document.getElementById('ielts-best');
            const ieltsAvgEl = document.getElementById('ielts-avg');
            const ieltsCountEl = document.getElementById('ielts-count');
            const ieltsLatestEl = document.getElementById('ielts-latest');

            if (ieltsRecords.length > 0) {
                const overs = ieltsRecords.map(r => r.overall);
                ieltsBestEl.textContent = Math.max(...overs).toFixed(1);
                ieltsAvgEl.textContent = (overs.reduce((a, b) => a + b, 0) / overs.length).toFixed(1);
                ieltsCountEl.textContent = ieltsRecords.length;
                ieltsLatestEl.textContent = overs[overs.length - 1].toFixed(1);
            } else {
                ieltsBestEl.textContent = '-';
                ieltsAvgEl.textContent = '-';
                ieltsCountEl.textContent = '0';
                ieltsLatestEl.textContent = '-';
            }

            // å››çº§ç»Ÿè®¡
            const cet4BestEl = document.getElementById('cet4-best');
            const cet4AvgEl = document.getElementById('cet4-avg');
            const cet4CountEl = document.getElementById('cet4-count');

            if (cet4Records.length > 0) {
                const totals = cet4Records.map(r => r.total);
                cet4BestEl.textContent = Math.max(...totals);
                cet4AvgEl.textContent = Math.round(totals.reduce((a, b) => a + b, 0) / totals.length);
                cet4CountEl.textContent = cet4Records.length;
            } else {
                cet4BestEl.textContent = '-';
                cet4AvgEl.textContent = '-';
                cet4CountEl.textContent = '0';
            }

            // å…­çº§ç»Ÿè®¡
            const cet6BestEl = document.getElementById('cet6-best');
            const cet6AvgEl = document.getElementById('cet6-avg');
            const cet6CountEl = document.getElementById('cet6-count');

            if (cet6Records.length > 0) {
                const totals = cet6Records.map(r => r.total);
                cet6BestEl.textContent = Math.max(...totals);
                cet6AvgEl.textContent = Math.round(totals.reduce((a, b) => a + b, 0) / totals.length);
                cet6CountEl.textContent = cet6Records.length;
            } else {
                cet6BestEl.textContent = '-';
                cet6AvgEl.textContent = '-';
                cet6CountEl.textContent = '0';
            }
        }

        function resetAllStatCards() {
            const statIds = [
                'ielts-best', 'ielts-avg', 'ielts-count', 'ielts-latest',
                'cet4-best', 'cet4-avg', 'cet4-count',
                'cet6-best', 'cet6-avg', 'cet6-count'
            ];

            statIds.forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    if (id.includes('count')) {
                        el.textContent = '0';
                    } else {
                        el.textContent = '-';
                    }
                }
            });
        }

        function updateRecordsList(records) {
            const recordsList = document.getElementById('records-list');

            if (records.length === 0) {
                recordsList.innerHTML = `
                    <div class="text-center py-12 text-gray-400">
                        <div class="text-5xl mb-3">æš‚æ— è®°å½•</div>
                        <p class="text-lg text-gray-600">è¿˜æ²¡æœ‰å½•å…¥ä»»ä½•æˆç»©</p>
                    </div>
                `;
                return;
            }

            recordsList.innerHTML = [...records].reverse().map(r => {
                if (r.examType === 'ielts') {
                    return `
                        <div class="bg-gradient-to-r from-white to-gray-50 rounded-lg p-5 border-2 border-gray-200 hover:border-emerald-300 transition-all">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <div class="text-gray-800 font-semibold mb-2">${r.date || 'æœªçŸ¥æ—¥æœŸ'} - é›…æ€å­¦æœ¯ç±»</div>
                                    <div class="text-gray-600 text-sm flex gap-3 flex-wrap">
                                        <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded">L: ${r.listening?.score?.toFixed(1) || '0.0'}</span>
                                        <span class="bg-emerald-100 text-emerald-700 px-2 py-1 rounded">R: ${r.reading?.score?.toFixed(1) || '0.0'}</span>
                                        <span class="bg-amber-100 text-amber-700 px-2 py-1 rounded">W: ${r.writing?.score?.toFixed(1) || '0.0'}</span>
                                        <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded">S: ${r.speaking?.score?.toFixed(1) || '0.0'}</span>
                                    </div>
                                    <div class="flex items-center gap-2 mt-2">
                                        <span class="text-gray-600 text-sm">Overall:</span>
                                        <span class="text-3xl font-bold gradient-text-bright">${r.overall?.toFixed(1) || '0.0'}</span>
                                    </div>
                                </div>
                                <button onclick="deleteRecord(${r.id})" class="ml-4 text-gray-400 hover:text-red-500">åˆ é™¤</button>
                            </div>
                        </div>
                    `;
                } else {
                    const examName = r.examLevel === 'cet4' ? 'å››çº§' : 'å…­çº§';
                    return `
                        <div class="bg-gradient-to-r from-white to-gray-50 rounded-lg p-5 border-2 border-gray-200 hover:border-emerald-300 transition-all">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <div class="text-gray-800 font-semibold mb-2">${r.date || 'æœªçŸ¥æ—¥æœŸ'} - å¤§å­¦${examName}</div>
                                    <div class="text-gray-600 text-sm flex gap-3 flex-wrap">
                                        <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded">å¬åŠ›: ${r.listening?.total || 0}</span>
                                        <span class="bg-emerald-100 text-emerald-700 px-2 py-1 rounded">é˜…è¯»: ${r.reading?.total || 0}</span>
                                        <span class="bg-orange-100 text-orange-700 px-2 py-1 rounded">å†™ä½œç¿»è¯‘: ${(r.writing?.score || 0) + (r.translation?.score || 0)}</span>
                                    </div>
                                    <div class="flex items-center gap-2 mt-2">
                                        <span class="text-gray-600 text-sm">æ€»åˆ†:</span>
                                        <span class="text-3xl font-bold gradient-text-bright">${r.total || 0}</span>
                                    </div>
                                </div>
                                <button onclick="deleteRecord(${r.id})" class="ml-4 text-gray-400 hover:text-red-500">åˆ é™¤</button>
                            </div>
                        </div>
                    `;
                }
            }).join('');
        }

        function updateRecordStats() {
            const recordCountEl = document.getElementById('record-count');
            if (recordCountEl) {
                recordCountEl.textContent = getRecords().length;
            }
        }

        // ==================== æ•°æ®å¯¼å‡ºå¯¼å…¥ ====================
        function exportData() {
            const records = getRecords();

            if (records.length === 0) {
                alert('æš‚æ— æ•°æ®å¯å¯¼å‡ºï¼');
                return;
            }

            const blob = new Blob([JSON.stringify(records, null, 2)], {
                type: 'application/json'
            });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `MyScore_Backup_${new Date().toISOString().slice(0, 10).replace(/-/g, '')}.json`;
            a.click();
            URL.revokeObjectURL(url);

            alert(`æ•°æ®å¯¼å‡ºæˆåŠŸï¼å…±å¯¼å‡º ${records.length} æ¡è®°å½•`);
        }

        function handleFileSelect(event) {
            const status = document.getElementById('file-status');

            if (event.target.files.length > 0) {
                status.textContent = `å·²é€‰æ‹©: ${event.target.files[0].name}`;
                status.classList.add('success');

                importData(event);
            } else {
                status.textContent = 'æš‚æœªé€‰æ‹©æ–‡ä»¶';
                status.classList.remove('success');
            }
        }

        function importData(event) {
            const file = event.target.files[0];

            if (!file) {
                alert('è¯·é€‰æ‹©è¦å¯¼å…¥çš„æ–‡ä»¶ï¼');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const content = e.target.result;
                    const imported = JSON.parse(content);

                    if (!Array.isArray(imported)) {
                        throw new Error('æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®ï¼šæœŸæœ›æ•°ç»„æ ¼å¼');
                    }

                    if (imported.length === 0) {
                        alert('æ–‡ä»¶ä¸­æ²¡æœ‰æˆç»©è®°å½•ï¼');
                        return;
                    }

                    // éªŒè¯æ¯æ¡è®°å½•çš„åŸºæœ¬ç»“æ„
                    const validRecords = imported.filter((r, index) => {
                        if (!r || typeof r !== 'object') {
                            console.warn(`ç¬¬ ${index + 1} æ¡è®°å½•æ ¼å¼æ— æ•ˆï¼Œå·²è·³è¿‡`);
                            return false;
                        }
                        return true;
                    });

                    if (validRecords.length === 0) {
                        throw new Error('æ–‡ä»¶ä¸­æ²¡æœ‰æœ‰æ•ˆçš„æˆç»©è®°å½•ï¼');
                    }

                    const existing = getRecords();
                    const existingIds = new Set(existing.map(r => r.id));

                    let newCount = 0;
                    let dupCount = 0;

                    validRecords.forEach(r => {
                        if (!existingIds.has(r.id)) {
                            existing.push(r);
                            existingIds.add(r.id);
                            newCount++;
                        } else {
                            dupCount++;
                        }
                    });

                    localStorage.setItem(STORAGE_KEY, JSON.stringify(existing));
                    updateUI();

                    alert(`æˆåŠŸå¯¼å…¥ ${newCount} æ¡æ–°è®°å½•ï¼Œè¿‡æ»¤äº† ${dupCount} æ¡é‡å¤è®°å½•ã€‚`);
                } catch (err) {
                    console.error('å¯¼å…¥é”™è¯¯:', err);
                    alert('å¯¼å…¥å¤±è´¥ï¼š' + err.message + '\n\nè¯·ç¡®ä¿æ–‡ä»¶æ˜¯æœ‰æ•ˆçš„ JSON æ ¼å¼ã€‚');
                }
            };
            reader.readAsText(file);
        }

        // ==================== é›…æ€è¡¨å•äº‹ä»¶ ====================
        const ieltsListeningRaw = document.getElementById('ielts-listening-raw');
        const ieltsReadingRaw = document.getElementById('ielts-reading-raw');
        const ieltsWritingScore = document.getElementById('ielts-writing-score');
        const ieltsWritingTask1 = document.getElementById('ielts-writing-task1');
        const ieltsWritingTask2 = document.getElementById('ielts-writing-task2');
        const ieltsSpeakingScore = document.getElementById('ielts-speaking-score');

        if (ieltsListeningRaw) {
            ieltsListeningRaw.addEventListener('input', function() {
                validateNumberInput(this, 0, 40, 'ielts-listening-warning');
                document.getElementById('ielts-listening-score').textContent = calculateListeningScore(parseInt(this.value) || 0).toFixed(1);
                updateIeltsOverallPreview();
                updateAccordionStatus('ielts-listening-raw', 'ielts-listening-status');
            });
        }

        if (ieltsReadingRaw) {
            ieltsReadingRaw.addEventListener('input', function() {
                validateNumberInput(this, 0, 40, 'ielts-reading-warning');
                document.getElementById('ielts-reading-score').textContent = calculateReadingScore(parseInt(this.value) || 0).toFixed(1);
                updateIeltsOverallPreview();
                updateAccordionStatus('ielts-reading-raw', 'ielts-reading-status');
            });
        }

        if (ieltsWritingScore) {
            ieltsWritingScore.addEventListener('input', function() {
                validateNumberInput(this, 0, 9, 'ielts-writing-warning');
                updateIeltsOverallPreview();
                updateAccordionStatus('ielts-writing-score', 'ielts-writing-status');
            });
        }

        // Task 1 å’Œ Task 2 è‡ªåŠ¨è®¡ç®—å¹¶å¡«å…¥æ€»åˆ†
        if (ieltsWritingTask1) {
            ieltsWritingTask1.addEventListener('input', function() {
                validateNumberInput(this, 0, 9, 'ielts-task1-warning');
                const task1 = parseFloat(this.value) || null;
                const task2 = parseFloat(ieltsWritingTask2?.value) || null;
                const calculated = calculateWritingScore(task1, task2);
                document.getElementById('ielts-writing-calculated').textContent = calculated !== null ? calculated.toFixed(1) : '-';

                // è‡ªåŠ¨å¡«å…¥Writingæ€»åˆ†æ¡†
                if (calculated !== null) {
                    ieltsWritingScore.value = calculated;
                    updateIeltsOverallPreview();
                    updateAccordionStatus('ielts-writing-score', 'ielts-writing-status');
                }
            });
        }

        if (ieltsWritingTask2) {
            ieltsWritingTask2.addEventListener('input', function() {
                validateNumberInput(this, 0, 9, 'ielts-task2-warning');
                const task1 = parseFloat(ieltsWritingTask1?.value) || null;
                const task2 = parseFloat(this.value) || null;
                const calculated = calculateWritingScore(task1, task2);
                document.getElementById('ielts-writing-calculated').textContent = calculated !== null ? calculated.toFixed(1) : '-';

                // è‡ªåŠ¨å¡«å…¥Writingæ€»åˆ†æ¡†
                if (calculated !== null) {
                    ieltsWritingScore.value = calculated;
                    updateIeltsOverallPreview();
                    updateAccordionStatus('ielts-writing-score', 'ielts-writing-status');
                }
            });
        }

        if (ieltsSpeakingScore) {
            ieltsSpeakingScore.addEventListener('input', function() {
                validateNumberInput(this, 0, 9, 'ielts-speaking-warning');
                updateIeltsOverallPreview();
                updateAccordionStatus('ielts-speaking-score', 'ielts-speaking-status');
            });
        }

        // ==================== å››å…­çº§è¡¨å•äº‹ä»¶ ====================
        const cetListeningSectionA = document.getElementById('cet-listening-sectiona');
        const cetListeningSectionB = document.getElementById('cet-listening-sectionb');
        const cetListeningSectionC = document.getElementById('cet-listening-sectionc');
        const cetReadingWordBank = document.getElementById('cet-reading-wordbank');
        const cetReadingSkimming = document.getElementById('cet-reading-skimming');
        const cetReadingReading = document.getElementById('cet-reading-reading');
        const cetWritingRaw = document.getElementById('cet-writing-raw');
        const cetTranslationRaw = document.getElementById('cet-translation-raw');
        const cetExamDate = document.getElementById('cet-exam-date');

        [cetListeningSectionA, cetListeningSectionB, cetListeningSectionC].forEach(input => {
            input.addEventListener('input', function() {
                const max = input === cetListeningSectionA ? 8 : (input === cetListeningSectionB ? 7 : 10);
                const warningId = input === cetListeningSectionA ? 'cet-sectiona-warning' : 
                    (input === cetListeningSectionB ? 'cet-sectionb-warning' : 'cet-sectionc-warning');
                validateNumberInput(input, 0, max, warningId);
                updateCetTotalPreview();
                updateAccordionStatus(input.id, 'cet-listening-status');
            });
        });

        [cetReadingWordBank, cetReadingSkimming, cetReadingReading].forEach(input => {
            input.addEventListener('input', function() {
                validateNumberInput(input, 0, 10, 'cet-' + input.id.split('-')[1] + '-warning');
                updateCetTotalPreview();
                updateAccordionStatus(input.id, 'cet-reading-status');
            });
        });

        cetWritingRaw.addEventListener('input', function() {
            validateNumberInput(this, 0, 15, 'cet-writing-warning');
            updateCetTotalPreview();
            updateAccordionStatus('cet-writing-raw', 'cet-writing-status');
        });

        cetTranslationRaw.addEventListener('input', function() {
            validateNumberInput(this, 0, 15, 'cet-translation-warning');
            updateCetTotalPreview();
            updateAccordionStatus('cet-translation-raw', 'cet-translation-status');
        });

        cetExamDate.addEventListener('click', function() {
            this.select();
        });

        cetExamDate.addEventListener('input', function() {
            const formatted = formatDateInput(this.value);
            if (formatted !== this.value && formatted !== '') {
                this.value = formatted;
                document.getElementById('cet-date-warning').textContent = '';
            }
        });

        // ==================== é›…æ€è¡¨å•æäº¤ ====================
        document.getElementById('ielts-form').addEventListener('submit', function(e) {
            e.preventDefault();

            if (!validateNumberInput(ieltsListeningRaw, 0, 40, 'ielts-listening-warning') ||
                !validateNumberInput(ieltsReadingRaw, 0, 40, 'ielts-reading-warning') ||
                !validateNumberInput(ieltsWritingScore, 0, 9, 'ielts-writing-warning') ||
                !validateNumberInput(ieltsSpeakingScore, 0, 9, 'ielts-speaking-warning')) {
                alert('è¯·ä¿®æ­£è¾“å…¥é”™è¯¯');
                return;
            }

            const listeningRaw = parseInt(ieltsListeningRaw.value);
            const readingRaw = parseInt(ieltsReadingRaw.value);
            const writing = parseFloat(ieltsWritingScore.value);
            const speaking = parseFloat(ieltsSpeakingScore.value);

            const listeningScore = calculateListeningScore(listeningRaw);
            const readingScore = calculateReadingScore(readingRaw);
            const overall = calculateOverall(listeningScore, readingScore, writing, speaking);

            const record = {
                id: Date.now(),
                examType: 'ielts',
                date: document.getElementById('ielts-exam-date').value,
                listening: {
                    raw: listeningRaw,
                    score: listeningScore
                },
                reading: {
                    raw: readingRaw,
                    score: readingScore
                },
                writing: {
                    score: writing
                },
                speaking: {
                    score: speaking
                },
                overall: overall
            };

            saveRecord(record);
            updateUI();

            this.reset();
            document.getElementById('ielts-listening-score').textContent = '0.0';
            document.getElementById('ielts-reading-score').textContent = '0.0';
            updateIeltsOverallPreview();
            initAccordions();

            alert('é›…æ€æˆç»©ä¿å­˜æˆåŠŸï¼');
        });

        // ==================== å››å…­çº§è¡¨å•æäº¤ ====================
        document.getElementById('cet-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const validSectionA = validateNumberInput(cetListeningSectionA, 0, 8, 'cet-sectiona-warning');
            const validSectionB = validateNumberInput(cetListeningSectionB, 0, 7, 'cet-sectionb-warning');
            const validSectionC = validateNumberInput(cetListeningSectionC, 0, 10, 'cet-sectionc-warning');
            const validWordBank = validateNumberInput(cetReadingWordBank, 0, 10, 'cet-wordbank-warning');
            const validSkimming = validateNumberInput(cetReadingSkimming, 0, 10, 'cet-skimming-warning');
            const validReading = validateNumberInput(cetReadingReading, 0, 10, 'cet-reading-warning');
            const validWriting = validateNumberInput(cetWritingRaw, 0, 15, 'cet-writing-warning');
            const validTranslation = validateNumberInput(cetTranslationRaw, 0, 15, 'cet-translation-warning');

            if (!validSectionA || !validSectionB || !validSectionC || !validWordBank || !validSkimming || !validReading || !validWriting || !validTranslation) {
                alert('è¯·ä¿®æ­£è¾“å…¥é”™è¯¯åå†æäº¤');
                return;
            }

            const date = document.getElementById('cet-exam-date').value;
            const sectionA = parseInt(cetListeningSectionA.value);
            const sectionB = parseInt(cetListeningSectionB.value);
            const sectionC = parseInt(cetListeningSectionC.value);
            const wordBank = parseInt(cetReadingWordBank.value);
            const skimming = parseInt(cetReadingSkimming.value);
            const reading = parseInt(cetReadingReading.value);
            const writingRaw = parseFloat(cetWritingRaw.value);
            const translationRaw = parseFloat(cetTranslationRaw.value);

            const listeningTotal = calculateCetListening(sectionA, sectionB, sectionC);
            const readingTotal = calculateCetReading(wordBank, skimming, reading);
            const writingScore = convertRawToReportScore(writingRaw);
            const translationScore = convertRawToReportScore(translationRaw);
            const total = listeningTotal + readingTotal + writingScore + translationScore;

            const record = {
                id: Date.now(),
                examType: 'cet',
                examLevel: currentExamType,
                date: date,
                listening: {
                    sectionA: { count: sectionA },
                    sectionB: { count: sectionB },
                    sectionC: { count: sectionC },
                    total: listeningTotal
                },
                reading: {
                    wordBank: { count: wordBank },
                    skimming: { count: skimming },
                    reading: { count: reading },
                    total: readingTotal
                },
                writing: {
                    raw: writingRaw,
                    score: writingScore
                },
                translation: {
                    raw: translationRaw,
                    score: translationScore
                },
                total: total
            };

            saveRecord(record);
            updateUI();

            this.reset();
            clearAllWarnings();
            updateCetTotalPreview();
            initAccordions();

            const examName = currentExamType === 'cet4' ? 'å››çº§' : 'å…­çº§';
            alert(`å¤§å­¦${examName}æˆç»©ä¿å­˜æˆåŠŸï¼æ€»åˆ†: ${total}`);
        });

        // ==================== åˆå§‹åŒ– ====================
        function init() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('ielts-exam-date').value = today;
            document.getElementById('cet-exam-date').value = today;
            updateUI();
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
    
    <!-- ç‰ˆæƒæ ‡è¯† -->
    <footer class="mt-12 py-6 text-center">
        <p class="text-gray-500 text-sm font-sans tracking-wide">Copyright <span class="italic">&copy;LYT</span>ï¼Œ2026 All Rights Reserved</p>
    </footer>
</body>
</html>